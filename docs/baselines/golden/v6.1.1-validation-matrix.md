# v6.1.1 Golden Baseline Validation Matrix

Use this matrix before tagging `v6.1.1`.

## Status Legend

- `PASS`: validated with call evidence
- `PENDING`: not yet validated
- `N/A`: intentionally not claimed for this release

## Provider x Transport Matrix

| Provider | Transport | Status | Call ID | Evidence |
|---|---|---|---|---|
| OpenAI Realtime | AudioSocket | PENDING | 1770437116.2282 | [Details](#openai-realtime-audiosocket-call-17704371162282) |
| OpenAI Realtime | ExternalMedia RTP | PENDING | 1770438511.2317 | [Details](#openai-realtime-externalmedia-rtp-call-17704385112317) |
| Google Live | AudioSocket | PENDING | 1770430481.2270 | [Details](#google-live-audiosocket-call-17704304812270) |
| Deepgram Voice Agent | AudioSocket | PASS | 1770436967.2278 | [Details](#deepgram-voice-agent-audiosocket-call-17704369672278) |
| Deepgram Voice Agent | ExternalMedia RTP | PASS | 1770438417.2310 | [Details](#deepgram-voice-agent-externalmedia-rtp-call-17704384172310) |
| Local Hybrid Pipeline | AudioSocket | PENDING | 1770437273.2286 | [Details](#local-hybrid-pipeline-audiosocket-call-17704372732286) |
| Local Hybrid Pipeline | ExternalMedia RTP | PENDING | 1770438580.2324 | [Details](#local-hybrid-pipeline-externalmedia-rtp-call-17704385802324) |
| ElevenLabs Agent | AudioSocket | PENDING | 1770437543.2290 | [Details](#elevenlabs-agent-audiosocket-call-17704375432290) |

## Required Acceptance Checks per Call

- Greeting completes (no dead air or cutoff).
- At least two user turns handled correctly.
- No severe audio corruption/repetition/clipping.
- Clean hangup (no stuck Stasis session/orphan channels).
- No new `ERROR` spam in `ai_engine` logs.

## Environment Capture

- Host OS/version: Sangoma Linux 7 (Core)
- Asterisk/FreePBX version: Asterisk 18.26.4 (FreePBX environment)
- Branch/commit: `deploy/v6-shipping` @ `54b3f0b`
- Redacted config notes: tested with `audio_transport=audiosocket` and `audio_transport=externalmedia`; `downstream_mode=stream`; `config_version=6`

## Detailed Validation Notes

### AudioSocket

#### Google Live AudioSocket Call 17704304812270

- Call ID: `1770430481.2270`
- Operator result: worked fine (greeting, two-way audio, tool calls, hangup).
- Server evidence: `agent rca --json --call 1770430481.2270` returned `no ai_engine logs found for this call_id`.
- Matrix decision: `PENDING` until a repeat call captures ai_engine evidence for this provider/context.

#### Deepgram Voice Agent AudioSocket Call 17704369672278

- Call ID: `1770436967.2278`
- Operator result: worked fine (greeting, two-way audio, tool calls, hangup).
- Server evidence:
  - `agent rca --json --call 1770436967.2278` captured full call pipeline with AudioSocket.
  - Tool events recorded: `request_transcript` success and `hangup_call` success.
  - Transcript send logged after call completion.
- Matrix decision: `PASS`.

#### OpenAI Realtime AudioSocket Call 17704371162282

- Call ID: `1770437116.2282`
- Operator result: mostly worked; transcript not offered, hangup succeeded on second attempt.
- Server evidence:
  - `agent rca --json --call 1770437116.2282` captured AudioSocket call.
  - Warning logged: AI used farewell phrase without hangup tool at one point.
  - Later `hangup_call` tool executed successfully, but `Farewell timeout expired` indicates no provider farewell audio in that path.
- Matrix decision: `PENDING` (retest needed for transcript-offer behavior and first-attempt hangup reliability).

#### Local Hybrid Pipeline AudioSocket Call 17704372732286

- Call ID: `1770437273.2286`
- Operator result: worked fine (greeting, two-way audio, tool calls, hangup).
- Server evidence:
  - `agent rca --json --call 1770437273.2286` captured AudioSocket call with tool execution.
  - `request_transcript` and `hangup_call` paths executed.
  - One error logged during teardown: ARI `POST /channels/<id>/variable` returned `404 Channel not found`.
- Matrix decision: `PENDING` (retest to confirm teardown error is benign and non-recurring).

#### ElevenLabs Agent AudioSocket Call 17704375432290

- Call ID: `1770437543.2290`
- Operator result: agent hung up while confirming email.
- Server evidence:
  - `agent rca --json --call 1770437543.2290` captured AudioSocket call.
  - `request_transcript` executed successfully.
  - Provider then invoked `hangup_call`; tool executed successfully and call terminated.
- Matrix decision: `PENDING` (requires prompt/tool-policy review and retest of transcript confirmation flow).

### ExternalMedia RTP

#### Deepgram Voice Agent ExternalMedia RTP Call 17704384172310

- Call ID: `1770438417.2310`
- Operator result: worked fine (greeting, two-way audio, tool calls, hangup).
- Server evidence:
  - `agent rca --json --call 1770438417.2310` captured ExternalMedia pipeline.
  - Tool events recorded: `request_transcript` success and `hangup_call` success.
  - Transcript send logged after call completion.
- Matrix decision: `PASS`.

#### OpenAI Realtime ExternalMedia RTP Call 17704385112317

- Call ID: `1770438511.2317`
- Operator result: worked fine; no transcript offer observed.
- Server evidence:
  - `agent rca --json --call 1770438511.2317` captured ExternalMedia pipeline.
  - `hangup_call` tool executed successfully.
  - Warning logged: `Farewell timeout expired - OpenAI did not generate audio within 5s, triggering hangup anyway`.
  - Warning logged: `Response completed without audio output` for function-call response path.
- Matrix decision: `PENDING` (retest needed for transcript-offer behavior and farewell-audio reliability).

#### Local Hybrid Pipeline ExternalMedia RTP Call 17704385802324

- Call ID: `1770438580.2324`
- Operator result: worked fine (greeting, two-way audio, tool calls, hangup).
- Server evidence:
  - `agent rca --json --call 1770438580.2324` captured ExternalMedia pipeline and tool execution.
  - Error logged during teardown: ARI `POST /channels/<id>/variable` returned `404 Channel not found`.
- Matrix decision: `PENDING` (retest to confirm teardown error is benign and non-recurring).

### Supplemental Validation (Not Claimed in Matrix Rows)

#### Google Live ExternalMedia RTP Call 17704383352303

- Call ID: `1770438335.2303`
- Operator result: worked fine (greeting, two-way audio, tool calls, hangup).
- Server evidence: `request_transcript` and `hangup_call` both succeeded in logs.

#### ElevenLabs Agent ExternalMedia RTP Call 17704387002331

- Call ID: `1770438700.2331`
- Operator result: worked fine (greeting, two-way audio, tool calls, hangup).
- Server evidence: `hangup_call` succeeded; transcript request path showed domain validation warning due test email domain.

## Commands Used

```bash
agent rca --json --call <call_id>
docker compose -p asterisk-ai-voice-agent logs --no-color ai_engine | grep <call_id>
```
